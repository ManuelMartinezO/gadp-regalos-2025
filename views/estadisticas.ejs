<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estadísticas de Juguetes</title>
    <link rel="stylesheet" href="/styles.css">
</head>

<body>
    <div class="container">
        <h1>Estadísticas de Entrega</h1>
        
        <!-- Totales generales -->
        <h2>Total de Juguetes</h2>
        <div class="stat-card">
            <h3>Total General</h3>
            <p class="stat-number">
                <%= totalesGenerales.niño + totalesGenerales.niña + totalesGenerales.bebe %>
            </p>
        </div>
        <div class="stats">
            <div class="stat-card">
                <h3>Niños</h3>
                <p class="stat-number">
                    <%= totalesGenerales.niño %>
                </p>
            </div>
            <div class="stat-card">
                <h3>Niñas</h3>
                <p class="stat-number">
                    <%= totalesGenerales.niña %>
                </p>
            </div>
            <div class="stat-card">
                <h3>Bebés</h3>
                <p class="stat-number">
                    <%= totalesGenerales.bebe %>
                </p>
            </div>
        </div>

        <!-- NUEVO: Lista de donantes (general) -->
        <h2>Donantes - Totales Generales</h2>
        <div class="donantes-lista">
            <table>
                <thead>
                    <tr>
                        <th>Posición</th>
                        <th>Donante</th>
                        <th>Total Juguetes</th>
                    </tr>
                </thead>
                <tbody>
                    <% donacionesPorDonante.forEach((donante, index) => { %>
                        <tr>
                            <td><%= index + 1 %></td>
                            <td><%= donante.nombre %></td>
                            <td><%= donante.totalJuguetes %></td>
                        </tr>
                    <% }) %>
                    <% if (donacionesPorDonante.length === 0) { %>
                        <tr>
                            <td colspan="3">No hay donaciones registradas</td>
                        </tr>
                    <% } %>
                </tbody>
            </table>
        </div>

        <form method="GET" action="/estadisticas">
            <h2>Filtrar por fecha:</h2>
            <input type="date" name="fecha" value="<%= fechaSeleccionada %>">
            <button type="submit">Filtrar</button>
        </form>
        
        <!-- Totales filtrados por fecha -->
        <h2>Totales del día <%= fechaSeleccionada %></h2>
        <div class="stat-card">
            <h3>Total del día</h3>
            <p class="stat-number">
                <%= estadisticas.niño + estadisticas.niña + estadisticas.bebe %>
            </p>
        </div>
        <div class="stats">
            <div class="stat-card">
                <h3>Niños</h3>
                <p class="stat-number">
                    <%= estadisticas.niño %>
                </p>
            </div>
            <div class="stat-card">
                <h3>Niñas</h3>
                <p class="stat-number">
                    <%= estadisticas.niña %>
                </p>
            </div>
            <div class="stat-card">
                <h3>Bebés</h3>
                <p class="stat-number">
                    <%= estadisticas.bebe %>
                </p>
            </div>
        </div>

        <!-- NUEVO: Lista de donantes del día -->
        <h2>Donantes del día <%= fechaSeleccionada %></h2>
        <div class="donantes-lista">
            <table>
                <thead>
                    <tr>
                        <th>Posición</th>
                        <th>Donante</th>
                        <th>Total Juguetes</th>
                    </tr>
                </thead>
                <tbody>
                    <% donacionesPorDonanteFecha.forEach((donante, index) => { %>
                        <tr>
                            <td><%= index + 1 %></td>
                            <td><%= donante.nombre %></td>
                            <td><%= donante.totalJuguetes %></td>
                        </tr>
                    <% }) %>
                    <% if (donacionesPorDonanteFecha.length === 0) { %>
                        <tr>
                            <td colspan="3">No hay donaciones en esta fecha</td>
                        </tr>
                    <% } %>
                </tbody>
            </table>
        </div>
        
        <a href="/" class="btn-link">Volver al Inicio</a>
    </div>
</body>

</html>